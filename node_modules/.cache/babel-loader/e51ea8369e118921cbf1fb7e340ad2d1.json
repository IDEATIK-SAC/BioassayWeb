{"ast":null,"code":"import _defineProperty from\"/Users/danielcr/Documents/GitHub/Biossay/GstFront/biossay-webapp/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/danielcr/Documents/GitHub/Biossay/GstFront/biossay-webapp/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/danielcr/Documents/GitHub/Biossay/GstFront/biossay-webapp/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Dialog,DialogTitle,FormControl,DialogContent,TextField,DialogActions,Button,Select,MenuItem}from\"@material-ui/core\";import{getRUC,saveClientServer,getClientById,getRUCSunat,validateRUCClient}from\"../../../services/api/ClientService\";import swal from'sweetalert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ModalCustomer=function ModalCustomer(props){var isOpen=props.isOpen,handleClose=props.handleClose,customerId=props.customerId;var _useState=useState({Id:0,CustomerName:'',CustomerAddress:'',RUCClient:'',CategoryId:0}),_useState2=_slicedToArray(_useState,2),customer=_useState2[0],setCustomer=_useState2[1];useEffect(function(){if(customerId>0){getCustomerById(customerId);}else{setCustomer({});}},[customerId]);var getCustomerById=function getCustomerById(customerId){getClientById(customerId).then(function(response){setCustomer(function(last){return _objectSpread(_objectSpread({},last),{},{Id:response.data.id,CustomerName:response.data.customerName,CustomerAddress:response.data.customerAddress,RUCClient:response.data.rucClient,CategoryId:response.data.categoryId});});});};var onChangeRUC=function onChangeRUC(e){var value=e.target.value;getRUC(value).then(function(responsedata){var response=responsedata.response;if(response===null){getRUCSunat(value).then(function(response){var data=response.data;setCustomer(function(last){return _objectSpread(_objectSpread({},last),{},{CustomerName:data.nombre_o_razon_social,CustomerAddress:data.direccion_completa});});});}else{setCustomer(function(last){return _objectSpread(_objectSpread({},last),{},{Id:response.id,CustomerName:response.customerName,CustomerAddress:response.customerAddress,RUCClient:response.rucClient,CategoryId:response.categoryId});});}});};var onChangeCustomer=function onChangeCustomer(e){setCustomer(_objectSpread(_objectSpread({},customer),{},_defineProperty({},e.target.name,e.target.value)));};var saveCustomerServer=function saveCustomerServer(){validateRUCClient(customer).then(function(response){console.log(response);if(response.isSuccess){if(response.response===null){saveClientServer(customer).then(function(response){console.log(response);if(response.isSuccess){if(response.response>0){swal(\"Buen trabajo!\",\"El cliente a sido guardado con éxito\",\"success\").then(function(){clearFieldsCustomer();handleClose();});}}});}else{swal(\"Información!\",\"El cliente ya se encuentra registrado\",\"info\");}}});};var clearFieldsCustomer=function clearFieldsCustomer(){setCustomer({CategoryId:0,CustomerAddress:'',CustomerName:'',Id:0,RUCClient:''});};return/*#__PURE__*/_jsxs(Dialog,{open:isOpen,onClose:handleClose,\"aria-labelledby\":\"form-dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"form-dialog-title\",children:\"Modelo\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(TextField,{margin:\"dense\",name:\"RUCClient\",label:\"RUC\",type:\"text\",value:customer.RUCClient||'',onBlur:onChangeRUC,onChange:onChangeCustomer,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{autoFocus:true,margin:\"dense\",name:\"CustomerName\",label:\"Nombre\",type:\"text\",value:customer.CustomerName||'',onChange:onChangeCustomer,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{autoFocus:true,margin:\"dense\",name:\"CustomerAddress\",value:customer.CustomerAddress||'',label:\"Direcci\\xF3n\",onChange:onChangeCustomer,type:\"text\",fullWidth:true}),/*#__PURE__*/_jsx(FormControl,{style:{marginTop:15},fullWidth:true,variant:\"standard\",children:/*#__PURE__*/_jsxs(Select,{fullWidth:true,name:\"CategoryId\",value:customer.CategoryId||0,label:\"Categoria\",onChange:onChangeCustomer,children:[/*#__PURE__*/_jsx(MenuItem,{value:0,children:/*#__PURE__*/_jsx(\"em\",{children:\"Seleccione una categoria \"})}),/*#__PURE__*/_jsx(MenuItem,{value:1,children:\"SIN CATEGORIA\"}),/*#__PURE__*/_jsx(MenuItem,{value:2,children:\"BRONZE\"}),/*#__PURE__*/_jsx(MenuItem,{value:3,children:\"SILVER\"}),/*#__PURE__*/_jsx(MenuItem,{value:4,children:\"GOLD\"}),/*#__PURE__*/_jsx(MenuItem,{value:5,children:\"PLATINUM\"}),/*#__PURE__*/_jsx(MenuItem,{value:6,children:\"DIAMOND\"})]})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"primary\",children:\"Salir\"}),/*#__PURE__*/_jsx(Button,{onClick:saveCustomerServer,color:\"primary\",children:\"Guardar\"})]})]});};export default ModalCustomer;","map":{"version":3,"sources":["/Users/danielcr/Documents/GitHub/Biossay/GstFront/biossay-webapp/src/components/customers/components/modalCustomer.js"],"names":["React","useState","useEffect","Dialog","DialogTitle","FormControl","DialogContent","TextField","DialogActions","Button","Select","MenuItem","getRUC","saveClientServer","getClientById","getRUCSunat","validateRUCClient","swal","ModalCustomer","props","isOpen","handleClose","customerId","Id","CustomerName","CustomerAddress","RUCClient","CategoryId","customer","setCustomer","getCustomerById","then","response","last","data","id","customerName","customerAddress","rucClient","categoryId","onChangeRUC","e","value","target","responsedata","nombre_o_razon_social","direccion_completa","onChangeCustomer","name","saveCustomerServer","console","log","isSuccess","clearFieldsCustomer","marginTop"],"mappings":"0bAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAAQC,MAAR,CAAeC,WAAf,CAA2BC,WAA3B,CAAuCC,aAAvC,CAAqDC,SAArD,CAA+DC,aAA/D,CAA6EC,MAA7E,CAAoFC,MAApF,CAA2FC,QAA3F,KAA0G,mBAA1G,CACA,OAASC,MAAT,CAAgBC,gBAAhB,CAAiCC,aAAjC,CAA+CC,WAA/C,CAA4DC,iBAA5D,KAAoF,qCAApF,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,C,wFAGA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAS,CAC/B,GAAQC,CAAAA,MAAR,CAA2CD,KAA3C,CAAQC,MAAR,CAAgBC,WAAhB,CAA2CF,KAA3C,CAAgBE,WAAhB,CAA4BC,UAA5B,CAA2CH,KAA3C,CAA4BG,UAA5B,CAEA,cAAgCrB,QAAQ,CAAC,CACrCsB,EAAE,CAAC,CADkC,CAErCC,YAAY,CAAC,EAFwB,CAGrCC,eAAe,CAAC,EAHqB,CAIrCC,SAAS,CAAC,EAJ2B,CAKrCC,UAAU,CAAC,CAL0B,CAAD,CAAxC,wCAAOC,QAAP,eAAiBC,WAAjB,eAQA3B,SAAS,CAAC,UAAM,CACZ,GAAGoB,UAAU,CAAG,CAAhB,CAAkB,CACdQ,eAAe,CAACR,UAAD,CAAf,CACH,CAFD,IAEK,CACDO,WAAW,CAAC,EAAD,CAAX,CACH,CACJ,CANQ,CAMN,CAACP,UAAD,CANM,CAAT,CAQA,GAAMQ,CAAAA,eAAe,CAAC,QAAhBA,CAAAA,eAAgB,CAACR,UAAD,CAAc,CAChCR,aAAa,CAACQ,UAAD,CAAb,CAA0BS,IAA1B,CAA+B,SAAAC,QAAQ,CAAG,CACtCH,WAAW,CAAC,SAACI,IAAD,wCACLA,IADK,MAERV,EAAE,CAACS,QAAQ,CAACE,IAAT,CAAcC,EAFT,CAGRX,YAAY,CAAEQ,QAAQ,CAACE,IAAT,CAAcE,YAHpB,CAIRX,eAAe,CAAEO,QAAQ,CAACE,IAAT,CAAcG,eAJvB,CAKRX,SAAS,CAAEM,QAAQ,CAACE,IAAT,CAAcI,SALjB,CAMRX,UAAU,CAAEK,QAAQ,CAACE,IAAT,CAAcK,UANlB,IAAD,CAAX,CAQF,CATF,EAUH,CAXD,CAaA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,CAAD,CAAK,CACrB,GAAIC,CAAAA,KAAK,CAAGD,CAAC,CAACE,MAAF,CAASD,KAArB,CACA9B,MAAM,CAAC8B,KAAD,CAAN,CAAcX,IAAd,CAAmB,SAAAa,YAAY,CAAG,CAC9B,GAAOZ,CAAAA,QAAP,CAAmBY,YAAnB,CAAOZ,QAAP,CACA,GAAGA,QAAQ,GAAO,IAAlB,CAAuB,CACnBjB,WAAW,CAAC2B,KAAD,CAAX,CAAmBX,IAAnB,CAAwB,SAAAC,QAAQ,CAAG,CAC/B,GAAQE,CAAAA,IAAR,CAAiBF,QAAjB,CAAQE,IAAR,CACAL,WAAW,CAAC,SAACI,IAAD,wCACLA,IADK,MAERT,YAAY,CAAGU,IAAI,CAACW,qBAFZ,CAGRpB,eAAe,CAAGS,IAAI,CAACY,kBAHf,IAAD,CAAX,CAMH,CARD,EASH,CAVD,IAUK,CACDjB,WAAW,CAAC,SAACI,IAAD,wCACLA,IADK,MAERV,EAAE,CAACS,QAAQ,CAACG,EAFJ,CAGRX,YAAY,CAAEQ,QAAQ,CAACI,YAHf,CAIRX,eAAe,CAAEO,QAAQ,CAACK,eAJlB,CAKRX,SAAS,CAAEM,QAAQ,CAACM,SALZ,CAMRX,UAAU,CAAEK,QAAQ,CAACO,UANb,IAAD,CAAX,CAQH,CAEJ,CAvBD,EAwBH,CA1BD,CA4BA,GAAMQ,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACN,CAAD,CAAK,CAC1BZ,WAAW,gCAAMD,QAAN,wBAAiBa,CAAC,CAACE,MAAF,CAASK,IAA1B,CAAiCP,CAAC,CAACE,MAAF,CAASD,KAA1C,GAAX,CACH,CAFD,CAIA,GAAMO,CAAAA,kBAAkB,CAAE,QAApBA,CAAAA,kBAAoB,EAAI,CAC1BjC,iBAAiB,CAACY,QAAD,CAAjB,CAA4BG,IAA5B,CAAiC,SAAAC,QAAQ,CAAI,CACzCkB,OAAO,CAACC,GAAR,CAAYnB,QAAZ,EACA,GAAGA,QAAQ,CAACoB,SAAZ,CAAsB,CAClB,GAAIpB,QAAQ,CAACA,QAAT,GAAsB,IAA1B,CAAgC,CAC5BnB,gBAAgB,CAACe,QAAD,CAAhB,CAA2BG,IAA3B,CAAgC,SAAAC,QAAQ,CAAG,CACvCkB,OAAO,CAACC,GAAR,CAAYnB,QAAZ,EACA,GAAGA,QAAQ,CAACoB,SAAZ,CAAsB,CAClB,GAAGpB,QAAQ,CAACA,QAAT,CAAoB,CAAvB,CAAyB,CACrBf,IAAI,CAAC,eAAD,CAAkB,sCAAlB,CAA0D,SAA1D,CAAJ,CACCc,IADD,CACM,UAAM,CACRsB,mBAAmB,GACnBhC,WAAW,GACd,CAJD,EAKH,CACJ,CACJ,CAXD,EAYH,CAbD,IAaK,CACDJ,IAAI,CAAC,cAAD,CAAiB,uCAAjB,CAA0D,MAA1D,CAAJ,CACH,CACJ,CACJ,CApBD,EAqBH,CAtBD,CAwBA,GAAMoC,CAAAA,mBAAmB,CAAE,QAArBA,CAAAA,mBAAqB,EAAI,CAC3BxB,WAAW,CAAC,CACRF,UAAU,CAAG,CADL,CAERF,eAAe,CAAG,EAFV,CAGRD,YAAY,CAAG,EAHP,CAIRD,EAAE,CAAE,CAJI,CAKRG,SAAS,CAAG,EALJ,CAAD,CAAX,CAOH,CARD,CASI,mBACI,MAAC,MAAD,EAAQ,IAAI,CAAEN,MAAd,CAAsB,OAAO,CAAEC,WAA/B,CAA4C,kBAAgB,mBAA5D,wBACA,KAAC,WAAD,EAAa,EAAE,CAAC,mBAAhB,oBADA,cAEA,MAAC,aAAD,yBACI,KAAC,SAAD,EAEQ,MAAM,CAAC,OAFf,CAGQ,IAAI,CAAC,WAHb,CAIQ,KAAK,CAAC,KAJd,CAKQ,IAAI,CAAC,MALb,CAMQ,KAAK,CAAEO,QAAQ,CAACF,SAAT,EAAsB,EANrC,CAOQ,MAAM,CAAEc,WAPhB,CAQQ,QAAQ,CAAEO,gBARlB,CASQ,SAAS,KATjB,EADJ,cAYQ,KAAC,SAAD,EACI,SAAS,KADb,CAEI,MAAM,CAAC,OAFX,CAGI,IAAI,CAAC,cAHT,CAII,KAAK,CAAC,QAJV,CAKI,IAAI,CAAC,MALT,CAMI,KAAK,CAAEnB,QAAQ,CAACJ,YAAT,EAAyB,EANpC,CAOI,QAAQ,CAAEuB,gBAPd,CAQI,SAAS,KARb,EAZR,cAsBU,KAAC,SAAD,EACE,SAAS,KADX,CAEE,MAAM,CAAC,OAFT,CAGE,IAAI,CAAC,iBAHP,CAIE,KAAK,CAAEnB,QAAQ,CAACH,eAAT,EAA4B,EAJrC,CAKE,KAAK,CAAC,cALR,CAME,QAAQ,CAAEsB,gBANZ,CAOE,IAAI,CAAC,MAPP,CAQE,SAAS,KARX,EAtBV,cAgCM,KAAC,WAAD,EAAa,KAAK,CAAE,CAACO,SAAS,CAAC,EAAX,CAApB,CAAoC,SAAS,KAA7C,CAA8C,OAAO,CAAC,UAAtD,uBACkB,MAAC,MAAD,EACA,SAAS,KADT,CAEA,IAAI,CAAC,YAFL,CAGA,KAAK,CAAE1B,QAAQ,CAACD,UAAT,EAAuB,CAH9B,CAIA,KAAK,CAAC,WAJN,CAKA,QAAQ,CAAEoB,gBALV,wBAOA,KAAC,QAAD,EAAU,KAAK,CAAE,CAAjB,uBACI,iDADJ,EAPA,cAWA,KAAC,QAAD,EAAU,KAAK,CAAE,CAAjB,2BAXA,cAYA,KAAC,QAAD,EAAU,KAAK,CAAE,CAAjB,oBAZA,cAaA,KAAC,QAAD,EAAU,KAAK,CAAE,CAAjB,oBAbA,cAcA,KAAC,QAAD,EAAU,KAAK,CAAE,CAAjB,kBAdA,cAeA,KAAC,QAAD,EAAU,KAAK,CAAE,CAAjB,sBAfA,cAgBA,KAAC,QAAD,EAAU,KAAK,CAAE,CAAjB,qBAhBA,GADlB,EAhCN,GAFA,cAyDA,MAAC,aAAD,yBACI,KAAC,MAAD,EAAQ,OAAO,CAAE1B,WAAjB,CAA8B,KAAK,CAAC,SAApC,mBADJ,cAII,KAAC,MAAD,EAAQ,OAAO,CAAE4B,kBAAjB,CAAsC,KAAK,CAAC,SAA5C,qBAJJ,GAzDA,GADJ,CAoEH,CArKD,CAuKA,cAAe/B,CAAAA,aAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {Dialog,DialogTitle,FormControl,DialogContent,TextField,DialogActions,Button,Select,MenuItem} from \"@material-ui/core\";\nimport { getRUC,saveClientServer,getClientById,getRUCSunat ,validateRUCClient} from \"../../../services/api/ClientService\";\nimport swal from 'sweetalert';\n\n\nconst ModalCustomer = (props)=>{\nconst { isOpen, handleClose,customerId } = props;\n\nconst [customer, setCustomer] = useState({\n    Id:0,\n    CustomerName:'',\n    CustomerAddress:'',\n    RUCClient:'',\n    CategoryId:0\n});\n\nuseEffect(() => {\n    if(customerId > 0){\n        getCustomerById(customerId);\n    }else{\n        setCustomer({});\n    }\n}, [customerId])\n\nconst getCustomerById=(customerId)=>{\n    getClientById(customerId).then(response =>{\n        setCustomer((last)=>({\n            ...last,\n            Id:response.data.id,\n            CustomerName: response.data.customerName,\n            CustomerAddress: response.data.customerAddress,\n            RUCClient: response.data.rucClient,\n            CategoryId: response.data.categoryId\n        })\n    )})\n};\n\nconst onChangeRUC = (e)=>{\n    let value = e.target.value;\n    getRUC(value).then(responsedata =>{ \n        const {response} = responsedata; \n        if(response  ===  null){\n            getRUCSunat(value).then(response =>{\n                const { data } = response;\n                setCustomer((last)=>({\n                    ...last,\n                    CustomerName : data.nombre_o_razon_social,\n                    CustomerAddress : data.direccion_completa,\n                }),  \n                )\n            })\n        }else{\n            setCustomer((last)=>({\n                ...last,\n                Id:response.id,\n                CustomerName: response.customerName,\n                CustomerAddress: response.customerAddress,\n                RUCClient: response.rucClient,\n                CategoryId: response.categoryId\n            }))\n        }\n \n    });\n}\n\nconst onChangeCustomer = (e)=>{\n    setCustomer({ ...customer, [e.target.name]: e.target.value });\n}\n\nconst saveCustomerServer =()=>{\n    validateRUCClient(customer).then(response => {\n        console.log(response);\n        if(response.isSuccess){\n            if (response.response === null) {\n                saveClientServer(customer).then(response =>{ \n                    console.log(response);\n                    if(response.isSuccess){\n                        if(response.response > 0){\n                            swal(\"Buen trabajo!\", \"El cliente a sido guardado con éxito\", \"success\")\n                            .then(() => { \n                                clearFieldsCustomer();\n                                handleClose();\n                            });\n                        }\n                    } \n                });\n            }else{\n                swal(\"Información!\", \"El cliente ya se encuentra registrado\", \"info\")\n            }\n        }\n    }) \n}\n\nconst clearFieldsCustomer =()=>{\n    setCustomer({\n        CategoryId : 0,\n        CustomerAddress : '',\n        CustomerName : '',\n        Id :0,\n        RUCClient : ''\n    });\n}\n    return(\n        <Dialog open={isOpen} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Modelo</DialogTitle>\n        <DialogContent>\n            <TextField\n                    \n                    margin=\"dense\"\n                    name=\"RUCClient\"\n                    label=\"RUC\"\n                    type=\"text\"\n                    value={customer.RUCClient || ''}\n                    onBlur={onChangeRUC}\n                    onChange={onChangeCustomer}\n                    fullWidth\n                    />\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    name=\"CustomerName\"\n                    label=\"Nombre\"\n                    type=\"text\"\n                    value={customer.CustomerName || ''}\n                    onChange={onChangeCustomer}\n                    fullWidth\n                    />\n                  <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    name=\"CustomerAddress\"\n                    value={customer.CustomerAddress || ''}\n                    label=\"Dirección\"\n                    onChange={onChangeCustomer}\n                    type=\"text\"\n                    fullWidth\n                    />\n              <FormControl style={{marginTop:15}} fullWidth variant=\"standard\"  > \n                                <Select\n                                fullWidth\n                                name=\"CategoryId\"\n                                value={customer.CategoryId || 0}\n                                label=\"Categoria\"\n                                onChange={onChangeCustomer}\n                                >\n                                <MenuItem value={0}>\n                                    <em>Seleccione una categoria </em>\n                                </MenuItem>\n                                \n                                <MenuItem value={1}>SIN CATEGORIA</MenuItem>\n                                <MenuItem value={2}>BRONZE</MenuItem>\n                                <MenuItem value={3}>SILVER</MenuItem>\n                                <MenuItem value={4}>GOLD</MenuItem>\n                                <MenuItem value={5}>PLATINUM</MenuItem>\n                                <MenuItem value={6}>DIAMOND</MenuItem>\n                            \n                                </Select>\n                            \n                            </FormControl>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n            Salir\n            </Button>\n            <Button onClick={saveCustomerServer}  color=\"primary\">\n            Guardar\n            </Button>\n        </DialogActions>\n        </Dialog>\n    );\n}\n\nexport default ModalCustomer;"]},"metadata":{},"sourceType":"module"}